<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<title>Вход в стаята</title>
<style>
body {font-family:Arial;text-align:center;padding:50px;background:#f0f4ff;}
input {padding:10px;font-size:16px;margin:10px;width:200px;}
button {padding:10px 20px;font-size:16px;background:#3399ff;color:#fff;border:none;border-radius:6px;cursor:pointer;}
button:hover {background:#1d7ddb;}
</style>
</head>
<body>
<h2>НАПИШИ КОДА ОТ СТРИЙМА ТУК</h2>
<input type="text" id="pin" placeholder="Код" maxlength="6"><br>
<input type="text" id="username" placeholder="Твоето потребителско име"><br>
<button onclick="joinRoom()">Вход</button>

<script>
let ws;

function joinRoom(){
    const pin = document.getElementById("pin").value;
    const username = document.getElementById("username").value.trim();
    if(!pin || !username){alert("Моля, въведете код и потребителско име!"); return;}

    // Connect to WebSocket
    ws = new WebSocket(`wss://${location.host}`);
    ws.onopen = () => {
        ws.send(JSON.stringify({ type:"joinRoom", code:pin, username }));
        window.location.href = `room.html?code=${pin}&username=${encodeURIComponent(username)}`;
    };
}
</script>
</body>
</html>
